### 插入命令

`i` 在当前**位置前**插入

`I` 在当前**行首**插入

`a ` 在当前**位置后**插入

`A ` 在当前**行尾**插入

`o ` 在当前**行之后**插入一行

`O` 在当前**行之前**插入一行



### 替换命令 

`ra` 将当前光标所在的字符替换成 a

`:s/old/new/` 用 old 替换 new，替换**当前行的第一个**匹配。 

`:s/old/new/g` 替换**当前行的所有**匹配

`:%s/old/new/` 替换**所有行的第一个**匹配

`:%s/old/new/g` 替换整个文件的所有匹配

`:10,20 s/^/    /g` 在第10行到第20行每行前面加四个空格，用于缩紧

`ddp` 交换光标所在行和其下紧邻的一行

> （PS：`dd` 删除当前行）



### 查找命令

`/text` 查找 text，按 n 键查找下一个，按 N 键查找前一个

`?text` 查找 text，反向查找，按 n 查找下一个， 按N 查找前一个

特殊字符的转义 `.*[]^%/?~$`

`:set ignorecase` 忽略大小写的查找

`:set noignorecase` 不忽略大小写的查找

**查找很长的词，如果一个词很长，可以将光标移动到该词上，按`*`或`#`可以对单词进行搜索 `*` 相当于 `/` ，`#` 相当于`？`** 这个还是挺有用的

`:set hlsearch` 高亮搜索结果，所有结果都高亮显示，而不是只显示一个匹配

`:set nohlsearch` 关闭高亮搜索显示

`:nohlsearch` 关闭当前的高亮显示，如果再次搜索或者按下 n 或者 N ，则会再次高亮

`:set incsearch` 逐步搜索模式， 对当前键入的字符进行搜索而不必等待键入完成

`:set wrapscan` 重新搜索，在搜索到文件头或者尾时，返回继续搜索，默认开启。



### 移动命令

`h 左` , `j 下` , `k 上` , `l 右`，这四个命令可以配合数字使用，比如 20j 就是向下移动20行，5h就是向左移动5个字符.

`w` 向前移动一个单词（光标停在单词首部），如果已到行尾，则转至下一行行首，可替代 `l` 命令

`b` 向后移动一个单词 

`e` 同 `w` ，只不过是光标停在单词尾部

`ge` 同 `b` 光标停在单词尾部

`^` 移动到本行第一个非空白字符上。

`0` / `<HOME>` 移动到本行的第一个字符上 

`$` 移动到行尾

`gg` / `[[` 移动到文件头

`G` / `]]` 移动到文件尾

`f`命令也可以用于移动，`fx`将找到光标后第一个为x的字符，`3fd`将找到第三个为d的字符。 （本地试了试，没用）

`F` 同`f`，反向查找。

跳到指定行，冒号+行号，回车，比如跳到240行就是 `:240`回车。另一个方法是行号+G，比如`230G`跳到230行。

**向上滚动系列：**

`Ctrl + y `向上滚动一行

`Ctrl + u `向上滚动半屏

`Ctrl + b` 向上滚动一屏

**向下滚动系列：**

`Ctrl + e` 向下滚动一行

`Ctrl + d` 向下滚动半屏

`Ctrl + f` 向下滚动一屏

### 撤销和重做

`u` 撤销（Undo）

`U` 撤销对整行的操作

`Ctrl + r `重做（Redo），即撤销的撤销。

### 删除命令

`x` 删除当前字符

`3x` 删除当前光标开始向后三个字符

`X` 删除当前字符的前一个字符。X=dh

`dl` 删除当前字符， dl=x

`dh` 删除前一个字符

`dd` 删除当前行

`dj` 删除本行及下一行

`dk` 删除本行及上一行

`10d` 删除当前行开始的10行。

`D` 删除当前字符至行尾。D=d$

`d$` 删除当前字符之后的所有字符（本行）

`kdgg` 删除当前行之前所有行（不包括当前行）

`jdG`（jd shift + g）   删除当前行之后所有行（不包括当前行）

`:1,10d` 删除1-10行

`:11,$d  `删除11行及以后所有的行

`:1,$d` 删除所有行

`J(shift + j)`　　删除两行之间的空行，实际上是合并两行

### 退出命令

`:wq` 保存并退出

`ZZ` 保存并退出

`:q!` 强制退出并忽略所有更改

`:e!` 放弃所有修改，并打开原来文件。

### 窗口命令

`:split或new `打开一个新窗口，光标停在顶层的窗口上

`:split file或:new file` 用新窗口打开文件

`split`打开的窗口都是横向的，使用`vsplit`可以纵向打开窗口。

`Ctrl+ww` 移动到下一个窗口

`Ctrl+wj` 移动到下方的窗口

`Ctrl+wk` 移动到上方的窗口

关闭窗口 `:close` 最后一个窗口不能使用此命令，可以防止意外退出vim。

`:q` 如果是最后一个被关闭的窗口，那么将退出vim。

`ZZ `保存并退出。关闭所有窗口，只保留当前窗口

### 执行shell 命令

`:!command`

`:!ls `列出当前目录下文件

`:!perl -c script.pl `检查perl脚本语法，可以不用退出vim，非常方便。

`:!perl script.pl `执行perl脚本，可以不用退出vim，非常方便。

`:suspend`或`Ctrl - Z` 挂起vim，回到shell，按fg可以返回vim。



### Linux下Vim 乱码

```shell
 编辑~/.vimrc文件，加上如下几行：

   set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936
   set termencoding=utf-8
   set encoding=utf-8
```



